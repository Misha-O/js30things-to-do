<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="main.css" />
    <title>Scoped CSS Variables and JS</title>
  </head>
  <body>
    <h2>Update CSS Variables with <span class="hl">JS</span></h2>

    <div class="controls">
      <label for="spacing">Spacing:</label>
      <input
        id="spacing"
        type="range"
        name="spacing"
        min="10"
        max="200"
        value="10"
      />
      <label for="blur">Blur:</label>
      <input id="blur" type="range" name="blur" min="0" max="25" value="4" />
      <label for="base">Base Color</label>
      <input id="base" type="color" name="base" value="#ffc600" />
    </div>

    <img id="img" src="https://picsum.photos/800/500" />
    <script>
      const spacingVar = document.getElementById("spacing");
      const blurVar = document.getElementById("blur");
      const baseVar = document.getElementById("base");
      const px = "px";

      spacingVar.addEventListener("change", inputUpdate);
      spacingVar.addEventListener("mousedown", (e) => {
        spacingVar.addEventListener("mousemove", inputUpdate);
      });
      blurVar.addEventListener("change", inputUpdate);
      blurVar.addEventListener("mousedown", (e) => {
        blurVar.addEventListener("mousemove", inputUpdate);
      });
      baseVar.addEventListener("change", updateHex);

      function inputUpdate() {
        const max = this.max;
        let calcValue = (this.value / max) * 100;
        document.documentElement.style.setProperty(
          `--${this.name}`,
          `${calcValue}${px}`
        );
      }
      function updateHex() {
        let hexVal = this.value;
        document.documentElement.style.setProperty(
          `--${this.name}`,
          `${hexVal}`
        );
      }
    </script>
  </body>
</html>
